# 🎨 OCR布局可视化功能使用指南

## ✨ 功能介绍

OCR布局可视化是一个全新的功能，它可以将OCR识别的文本按照原始文档的布局位置进行展示，让你更直观地看到文本在原始图片中的排列方式。

## 🚀 主要特性

### 1. **空间位置还原**
- 文本按照原始图片中的实际坐标位置显示
- 保持相对位置关系（上下左右）
- 支持多栏文档布局

### 2. **智能缩放**
- 自动适应屏幕大小
- 支持手动缩放（20% - 200%）
- 一键重置到默认50%缩放

### 3. **即时编辑**
- 点击任意文本框直接编辑
- Ctrl+Enter 快速保存
- Esc 取消编辑
- 修改自动同步到系统

### 4. **质量指示**
- 颜色标识置信度：绿色(高) 黄色(中) 红色(低)
- 悬停显示详细信息
- 行号和坐标显示

## 📱 使用方法

### **步骤1：上传文档**
1. 在报告上传页面选择你的体检报告图片
2. 等待OCR识别完成

### **步骤2：切换到布局视图**
1. 在OCR结果展示区域，找到右上角的视图切换按钮
2. 点击"布局"按钮（📐图标）
3. 系统会自动切换到布局可视化视图

### **步骤3：查看和编辑**
1. **查看布局**：文本会按照原始位置显示
2. **编辑文本**：点击任意文本框进行编辑
3. **调整视图**：使用缩放按钮调整大小
4. **检查质量**：悬停查看置信度和行号

## 🎯 使用场景

### **适合布局视图的情况：**
- ✅ 表格类报告（血常规、生化检查等）
- ✅ 多栏文档（左右分栏的报告）
- ✅ 需要保持位置关系的文档
- ✅ 想要直观检查OCR识别准确性

### **适合列表视图的情况：**
- ✅ 大量文本编辑
- ✅ 快速浏览所有内容
- ✅ 批量操作文本
- ✅ 传统的文本处理习惯

## 🔧 操作技巧

### **编辑快捷键**
- `点击文本框` → 开始编辑
- `Ctrl + Enter` → 保存编辑
- `Esc` → 取消编辑

### **缩放控制**
- `- 按钮` → 缩小视图
- `+ 按钮` → 放大视图  
- `重置按钮` → 回到50%缩放
- `百分比显示` → 当前缩放比例

### **视图切换**
- `列表视图` → 传统的行列表显示
- `布局视图` → 按位置的可视化显示
- 两种视图的编辑内容会自动同步

## 🎨 视觉元素说明

### **文本框颜色**
- 🟢 **绿色边框**：高置信度（≥90%）
- 🟡 **黄色边框**：中等置信度（70-90%）
- 🔴 **红色边框**：低置信度（<70%）

### **悬停信息**
- 左上角：行号（#01, #02...）
- 右上角：置信度百分比
- 右下角：编辑按钮（✏️）

### **页面信息**
- 显示页面尺寸（宽×高）
- 显示旋转角度
- 支持多页文档分页浏览

## 💡 最佳实践

### **提高使用体验**
1. **合适的缩放**：根据屏幕大小调整到舒适的缩放比例
2. **重点检查**：优先检查红色（低置信度）的文本框
3. **布局验证**：通过位置关系验证OCR识别的合理性
4. **及时保存**：编辑后记得应用修改

### **问题排查**
- 如果文本显示太小，尝试增加缩放比例
- 如果布局看起来混乱，可能是原始图片质量问题
- 如果编辑不生效，检查是否点击了"应用所有修改"

## 🔍 技术说明

该功能基于Azure OCR API返回的`boundingBox`坐标信息，通过以下技术实现：

- **坐标映射**：将OCR坐标映射到屏幕坐标
- **智能排序**：按Y坐标和X坐标进行智能排序
- **多栏检测**：自动识别左右栏布局
- **响应式缩放**：支持不同屏幕尺寸自适应

## 🚀 未来计划

我们正在开发更多功能：
- 🔄 支持图片叠加显示
- 📏 添加测量工具
- 🎨 自定义主题颜色
- 📊 布局分析报告

---

*这个功能让OCR不再是冷冰冰的文字列表，而是一个可以交互的文档布局！🎉* 